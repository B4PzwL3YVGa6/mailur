<div :class="['msgs', cls, name]">
  <!-- msgs -->
  <template v-if="name == 'msgs'">
  <div class="msgs__header">
    <div class="msgs__search">
      <input v-model="query" @keyup.enter="newQuery">
      <button @click="newQuery" class="icon--search"></button>
    </div>
    <div v-if="picked.length" class="msgs__actions">
      <button @click="archive" class="icon--archive" title="Archive"></button>
      <button @click="del" class="icon--trash" title="Move to Trash"></button>
      <button
        v-if="threads && picked.length"
        @click="link" class="icon--link"
        title="Link threads together"
      ></button>
      <tags class="msgs__tags" :raw="tags" :edit="editTags" :trancated="true" />
    </div>
    <div v-if="loaded.length" class="msgs__picking">
      <span>
        {{loaded.length}} of {{uids.length}} {{threads ? 'threads' : 'emails'}}
      </span>
      <span>
        (Select
        <a v-if="loaded.length > picked.length" @click.prevent="pickAll" href="#">All</a>
        <a v-if="picked.length > 0" @click.prevent="pickNone" href="#">None</a>
        )
      </span>
    </div>
  </div>
  <div class="msgs__body">
    <div v-if="!loaded.length && query">Loading...</div>
    <msg
      v-for="uid in uids" :key="uid"
      v-if="msgs[uid]"
      :msg="msgs[uid]"
      :thread="threads"
      :details="details"
      :detailed="uid == detailed"
      :pick="pick"
      :picked="picked.indexOf(uid) != -1"
      :editTags="editTags"
    />
    <a @click.prevent="loadMore()" href="#" v-if="hidden.length">Load more...</a>
  </div>
  </template>

  <!-- thread -->
  <template v-if="name == 'thread'">
  <div class="msgs__header">
    <div class="msgs__search">
      <input v-model="query" @keyup.enter="newQuery">
      <button @click="newQuery" class="icon--search"></button>
    </div>
    <div v-if="uids.length" class="msgs__actions">
      <button @click="archive" class="icon--archive" title="Archive"></button>
      <button @click="del" class="icon--trash" title="Move to Trash"></button>
      <tags class="msgs__tags" :raw="tags" :edit="editTags" :trancated="true" />
    </div>
    <div v-if="uids.length" class="msgs__picking">
      <span>
        {{uids.length}} emails in thread
      </span>
    </div>
  </div>
  <div class="msgs__body">
    <div v-if="!uids.length && query">Loading...</div>
    <div v-for="uid of uids" :key="uid">
      <a
        v-if="hidden.indexOf(uid) == 0"
        @click.prevent="loadAll()" href="#"
        class="msg-hidden"
      >{{hidden.length}} hidden</a>
      <msg v-if="msgs[uid]"
        :msg="msgs[uid]"
        :editTags="editTags"
        :details="details"
        :detailed="detailed.indexOf(uid) != -1"
        :class="{'msg--same-subj': same_subject.indexOf(uid) != -1}"
      />
    </div>
  </div>
  </template>
</div>
