<div class="msgs">
  <div class="msgs__search">
    <input ref="query" :value="query" @keyup.enter="newQuery">
    <button @click="newQuery" class="icon--search"></button>
  </div>
  <div class="msgs__header">
    <div v-if="picked.length" class="msgs__header__tags">
      <tags :raw="flags" :edit="editFlags" :trancated="true" />
    </div>
    <div v-if="picked.length" class="msgs__header__actions">
      <button @click="archive" class="icon--archive" title="Archive"></button>
      <button @click="del" class="icon--trash" title="Move to Trash"></button>
      <button
        v-if="threads && picked.length > 1"
        @click="link" class="icon--link"
        title="Link threads together"
      ></button>
    </div>
    <div v-if="loaded.length" class="msgs__header__picking">
      <span>
        {{loaded.length}} of {{uids.length}} {{threads ? 'threads' : 'emails'}}
      </span>
      <span>
        (Select
        <a v-if="loaded.length > picked.length" @click.prevent="pickAll" href="#">All</a>
        <a v-if="picked.length > 0" @click.prevent="pickNone" href="#">None</a>
        )
      </span>
    </div>
  </div>
  <div class="msgs__body">
    <div v-if="!loaded.length && query">Loading...</div>
    <msg
      v-for="uid in uids" :key="uid"
      v-if="msgs[uid]"
      :msg="msgs[uid]"
      :thread="threads"
      :details="details"
      :detailed="uid == detailed"
      :pick="pick"
      :picked="picked.indexOf(uid) != -1"
      :editFlags="editFlags"
    />
    <a @click.prevent="loadMore()" href="#" v-if="hidden.length > 0">Load more...</a>
  </div>
</div>
